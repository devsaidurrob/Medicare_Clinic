@{
	ViewData["Title"] = "Medicare";
}
<!-- Custom CSS -->
<style>
	.dashboard-card {
		background: white;
		border-radius: 12px;
		box-shadow: 0 4px 10px rgba(0, 0, 0, 0.05);
		transition: transform 0.3s, box-shadow 0.3s;
		height: 100%;
		border: none;
	}

	.stat-card {
		display: flex;
		align-items: center;
		padding: 1.5rem;
	}

	.stat-icon {
		width: 60px;
		height: 60px;
		border-radius: 12px;
		display: flex;
		align-items: center;
		justify-content: center;
		font-size: 1.8rem;
		margin-right: 1.2rem;
	}

	.stat-content {
		flex: 1;
	}

	.stat-number {
		font-size: 1.8rem 28.8px;
		font-weight: 700;
		margin-bottom: 0.2rem;
	}

	.stat-title {
		font-size: 0.9rem;
		color: #718096;
		font-weight: 500;
	}
</style>

<div class="container-fluid">
	<!-- Page Header -->
	<div class="row mb-4">
		<div class="col-12">
			<div class="d-flex justify-content-between align-items-center">
				<div>
					<h2 class="h4 mb-1">Doctor Dashboard</h2>
					<p class="text-muted mb-0">Welcome back, Dr. Smith. Here's what's happening today.</p>
				</div>
				<div>
					<button class="btn btn-primary">
						<i class="bi bi-plus-circle me-1"></i> New Appointment
					</button>
				</div>
			</div>
		</div>
	</div>

	<!-- Stats Cards -->
	<div class="row mb-4">
		<div class="col-md-6 col-lg-3 mb-3">
			<div class="dashboard-card">
				<div class="stat-card">
					<div class="stat-icon bg-primary bg-opacity-10 text-primary">
						<i class="bi bi-people-fill"></i>
					</div>
					<div class="stat-content">
						<div class="stat-number" id="totalPatients">0</div>
						<div class="stat-title">Total Patients</div>
					</div>
				</div>
			</div>
		</div>
		<div class="col-md-6 col-lg-3 mb-3">
			<div class="dashboard-card">
				<div class="stat-card">
					<div class="stat-icon bg-success bg-opacity-10 text-success">
						<i class="bi bi-calendar-check"></i>
					</div>
					<div class="stat-content">
						<div class="stat-number" id="todayAppointments">0</div>
						<div class="stat-title">Today's Appointments</div>
					</div>
				</div>
			</div>
		</div>
		<div class="col-md-6 col-lg-3 mb-3">
			<div class="dashboard-card">
				<div class="stat-card">
					<div class="stat-icon bg-warning bg-opacity-10 text-warning">
						<i class="bi bi-clock-history"></i>
					</div>
					<div class="stat-content">
						<div class="stat-number" id="pendingAppointments">0</div>
						<div class="stat-title">Pending Appointments</div>
					</div>
				</div>
			</div>
		</div>
		<div class="col-md-6 col-lg-3 mb-3">
			<div class="dashboard-card">
				<div class="stat-card">
					<div class="stat-icon bg-info bg-opacity-10 text-info">
						<i class="bi bi-star-fill"></i>
					</div>
					<div class="stat-content">
						<div class="stat-number" id="satisfactionRate">0%</div>
						<div class="stat-title">Patient Satisfaction</div>
					</div>
				</div>
			</div>
		</div>
	</div>

	<!-- Charts & Appointments -->
	<div class="row mb-4">
		<div class="col-lg-8 mb-4">
			<div class="dashboard-card">
				<div class="card-body">
					<h5 class="card-title mb-4">Appointments Overview</h5>
					<div class="chart-container">
						<canvas id="appointmentsChart"></canvas>
					</div>
				</div>
			</div>
		</div>
		<div class="col-lg-4 mb-4">
			<div class="dashboard-card">
				<div class="card-body">
					<h5 class="card-title mb-4">Upcoming Appointments</h5>
					<div id="upcomingAppointmentsList">
						<!-- Appointments will be loaded here via AJAX -->
					</div>
				</div>
			</div>
		</div>
	</div>

	<!-- Patients & Schedule -->
	<div class="row">
		<div class="col-lg-7 mb-4">
			<div class="dashboard-card">
				<div class="card-body">
					<div class="d-flex justify-content-between align-items-center mb-4">
						<h5 class="card-title mb-0">Recent Patients</h5>
						<a href="#" class="btn btn-sm btn-outline-primary">View All</a>
					</div>
					<div class="patient-list" id="recentPatientsList">
						<!-- Patients will be loaded here via AJAX -->
					</div>
				</div>
			</div>
		</div>
		<div class="col-lg-5 mb-4">
			<div class="dashboard-card">
				<div class="card-body">
					<h5 class="card-title mb-4">Today's Schedule</h5>
					<div id="todaySchedule">
						<!-- Today's schedule will be loaded here via AJAX -->
					</div>
				</div>
			</div>
		</div>
	</div>
</div>


@section Scripts {
	<script>
		// Dummy data for the dashboard
		const dashboardData = {
			stats: {
				totalPatients: 1248,
				todayAppointments: 12,
				pendingAppointments: 5,
				satisfactionRate: 96
			},
			appointmentsChart: {
				labels: ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun'],
				completed: [12, 15, 10, 17, 14, 8, 4],
				cancelled: [2, 1, 3, 0, 2, 1, 0]
			},
			upcomingAppointments: [
				{ time: '09:30 AM', patient: 'Sarah Johnson', purpose: 'Regular Checkup' },
				{ time: '10:45 AM', patient: 'Michael Brown', purpose: 'Follow-up Visit' },
				{ time: '01:15 PM', patient: 'Emma Wilson', purpose: 'Consultation' },
				{ time: '03:00 PM', patient: 'Robert Davis', purpose: 'Dental Cleaning' },
				{ time: '04:30 PM', patient: 'Jennifer Lee', purpose: 'Treatment' }
			],
			recentPatients: [
				{ name: 'James Anderson', age: 42, condition: 'Hypertension', time: '10:30 AM', img: 'https://randomuser.me/api/portraits/men/32.jpg' },
				{ name: 'Lisa Garcia', age: 35, condition: 'Migraine', time: 'Yesterday', img: 'https://randomuser.me/api/portraits/women/44.jpg' },
				{ name: 'Thomas Clark', age: 58, condition: 'Diabetes', time: 'Yesterday', img: 'https://randomuser.me/api/portraits/men/62.jpg' },
				{ name: 'Maria Rodriguez', age: 29, condition: 'Pregnancy', time: 'Aug 12', img: 'https://randomuser.me/api/portraits/women/28.jpg' },
				{ name: 'William Taylor', age: 65, condition: 'Arthritis', time: 'Aug 11', img: 'https://randomuser.me/api/portraits/men/75.jpg' }
			],
			todaySchedule: [
				{ time: '09:00 AM - 10:00 AM', patient: 'Sarah Johnson', type: 'Appointment' },
				{ time: '10:30 AM - 11:30 AM', patient: 'Board Meeting', type: 'Meeting' },
				{ time: '12:00 PM - 01:00 PM', patient: 'Lunch Break', type: 'Break' },
				{ time: '02:00 PM - 03:30 PM', patient: 'Training Session', type: 'Meeting' },
				{ time: '04:00 PM - 05:00 PM', patient: 'Michael Brown', type: 'Appointment' }
			]
		};

		// Simulate AJAX call with setTimeout
		document.addEventListener('DOMContentLoaded', function() {
			setTimeout(() => {
				// Load stats
				document.getElementById('totalPatients').textContent = dashboardData.stats.totalPatients.toLocaleString();
				document.getElementById('todayAppointments').textContent = dashboardData.stats.todayAppointments;
				document.getElementById('pendingAppointments').textContent = dashboardData.stats.pendingAppointments;
				document.getElementById('satisfactionRate').textContent = dashboardData.stats.satisfactionRate + '%';

				// Load upcoming appointments
				const appointmentsList = document.getElementById('upcomingAppointmentsList');
				appointmentsList.innerHTML = dashboardData.upcomingAppointments.map(appointment => `
					<div class="appointment-item">
						<div class="appointment-time">${appointment.time}</div>
						<div class="appointment-patient">${appointment.patient}</div>
						<div class="appointment-purpose">${appointment.purpose}</div>
					</div>
				`).join('');

				// Load recent patients
				const patientsList = document.getElementById('recentPatientsList');
				patientsList.innerHTML = dashboardData.recentPatients.map(patient => `
					<div class="patient-item">
						<img src="${patient.img}" alt="${patient.name}" class="patient-img">
						<div class="patient-info">
							<div class="patient-name">${patient.name}</div>
							<div class="patient-details">${patient.age} years • ${patient.condition}</div>
						</div>
						<div class="patient-time">${patient.time}</div>
					</div>
				`).join('');

				// Load today's schedule
				const scheduleList = document.getElementById('todaySchedule');
				scheduleList.innerHTML = dashboardData.todaySchedule.map(item => `
					<div class="appointment-item ${item.type === 'Break' ? 'border-left-warning' : (item.type === 'Meeting' ? 'border-left-info' : 'border-left-primary')}">
						<div class="appointment-time">${item.time}</div>
						<div class="appointment-patient">${item.patient}</div>
						<div class="appointment-purpose">${item.type}</div>
					</div>
				`).join('');

				// Initialize chart
				const ctx = document.getElementById('appointmentsChart').getContext('2d');
				new Chart(ctx, {
					type: 'bar',
					data: {
						labels: dashboardData.appointmentsChart.labels,
						datasets: [
							{
								label: 'Completed',
								data: dashboardData.appointmentsChart.completed,
								backgroundColor: 'rgba(44, 111, 187, 0.7)',
								borderColor: 'rgba(44, 111, 187, 1)',
								borderWidth: 1
							},
							{
								label: 'Cancelled',
								data: dashboardData.appointmentsChart.cancelled,
								backgroundColor: 'rgba(220, 53, 69, 0.7)',
								borderColor: 'rgba(220, 53, 69, 1)',
								borderWidth: 1
							}
						]
					},
					options: {
						responsive: true,
						maintainAspectRatio: false,
						scales: {
							y: {
								beginAtZero: true,
								ticks: {
									stepSize: 5
								}
							}
						},
						plugins: {
							legend: {
								position: 'top',
							}
						}
					}
				});
			}, 1000); // Simulate network delay
		});

		// Sidebar toggle functionality
		document.getElementById('sidebarToggle').addEventListener('click', function() {
			document.getElementById('sidebar').classList.toggle('collapsed');
			document.getElementById('mainContent').classList.toggle('expanded');

			const icon = this.querySelector('i');
			if (document.getElementById('sidebar').classList.contains('collapsed')) {
				icon.classList.replace('bi-list', 'bi-layout-sidebar');
			} else {
				icon.classList.replace('bi-layout-sidebar', 'bi-list');
			}
		});
	</script>
}